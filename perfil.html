<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Perfil de usuario</title>

  <!-- Si no hay "sesión", vuelve a Login -->
    <script>
        (function () {
            var user = localStorage.getItem('authUser'); // <-- MISMA CLAVE QUE EN main.js
            console.log('Guard del perfil: authUser =', user); // Esto es para verificar que ve la sesión
            if (!user) { window.location.replace('./Login.html'); }
        })();
    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="./main.css">
    <link rel="stylesheet" href="./perfil.css">
</head>

<body class="perfil-page">
    <div class="wrapper">
        <aside>
            <img class="logo-imagen" src="./imgs/imagen_2025-09-05_021420718-removebg-preview.png" alt="Logo de mi tienda">
            <header><h1 class="logo">Level Up Gamer</h1></header>

            <nav>
                <ul class="menu">
                    <li>
                        <a class="boton-menu boton perfil active" href="./perfil.html"><i class="bi bi-person-circle"></i>Perfil</a>
                    </li>
                    <li>
                        <a class="boton-menu boton home" href="./Home.html"><i class="bi bi-hand-index-thumb-fill"></i>Home</a>
                    </li>
                    <li>
                        <a class="boton-menu boton categoria" href="./LevelUpGamer.html"><i class="bi bi-hand-index-thumb-fill"></i>Catalogo</a>
                    </li>
                    <li>
                        <a class="boton-menu boton-carrito" href="./carrito.html">
                            <i class="bi bi-cart-fill"></i>Carrito<span id="numerito" class="numerito">0</span>
                        </a>
                    </li>
                    <li>
                        <a class="boton-menu boton categoria"><i class="bi bi-hand-index-thumb-fill"></i>Soporte</a>
                    </li>
                </ul>
            </nav>

            <footer>
                <p class="texto-footer">© 2025</p>
            </footer>
        </aside>

        <main class="perfil-main">
            <div class="contenedor-perfil">
            <section class="perfil-card">
                <h2>Mi perfil</h2>
                <div class="perfil-datos">
                    <img class="perfil-foto" src="./imgs/default-profile.png" alt="Foto de perfil" onerror="this.style.display='none'">
                    <p><strong>Usuario:</strong> <span id="perfil-usuario">—</span></p>
                    <p><strong>Correo:</strong> <span id="perfil-correo">—</span></p>
                </div>

                <div class="perfil-acciones">
                    <a class="boton-primario" href="./LevelUpGamer.html">Ir al catálogo</a>
                    <button id="logoutBtn" class="boton-primario" type="button">Cerrar sesión</button>
                </div>
            </section>
            </div>
        </main>
    </div>

    <script>
        // Rellenar datos desde localStorage
        document.addEventListener('DOMContentLoaded', () => {
            const user  = localStorage.getItem('authUser') || 'Usuario';
            const email = localStorage.getItem('registeredEmail') || '—'; // opcional si te registraste

            document.getElementById('perfil-usuario').textContent = user;
            document.getElementById('perfil-correo').textContent  = email;

            document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('authUser');        // cierra “sesión”
            // localStorage.removeItem('registeredEmail'); // si quieres limpiar el correo también
            window.location.href = './Login.html';
            });
        });
    </script>
</body>
</html>
